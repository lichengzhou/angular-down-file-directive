!function(){"use strict";var e=angular.module("cipchk",[]);e.directive("downFile",["$http",function(e){return{restrict:"A",scope:{httpType:"@",fileName:"@",httpData:"="},link:function(t,a,r){var n=angular.element(a);n.on("click",function(a){n.prop("disabled",!0),a.preventDefault();var p=t.httpType&&"post"===t.httpType.toLowerCase(),o={method:p?"POST":"GET",url:r.downFile,responseType:"arraybuffer"};p?o.data=t.httpData:o.params=t.httpData,e(o).success(function(e,t,a){n.prop("disabled",!1);var p;switch(r.downFileType){case"xlsx":p="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"txt":p="text/plain;charset=utf-8";break;default:throw"无效类型"}saveAs(new Blob([e],{type:p}),decodeURI(r.fileName||a()["x-filename"]))}).error(function(){n.prop("disabled",!1)})})}}}])}();